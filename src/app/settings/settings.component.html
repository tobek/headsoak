<h1>{{ sectionName }}</h1>

<div *ngIf="section === 'shortcuts'">
  <label>
    Modifier key(s):
    <input type="text"
      [(ngModel)]="settings['sMod']"
      (blur)="settingUpdated(settings.data['sMod'], settings['sMod'])"
      (keyup.enter)="settingUpdated(settings.data['sMod'], settings['sMod'])"
    />
    <span title="This will prefix all of these shortcuts. Your options are:&#10;&#10;- 'ctrl'&#10;- 'shift'&#10;- 'alt'&#10;- 'option'&#10;- 'command' (only on Mac)&#10;- 'meta' (doesn't work?)&#10;- 'mod' ('ctrl' on a PC, 'command' on a Mac).&#10;&#10;You can also combine them, e.g. 'ctrl+shift', or leave blank to control different shortcuts separately.">(?)</span>
  </label>
  <span *ngIf="dataService.isUnsaved(settings.data['sMod'])">saving...</span>
  <span style="color: red">{{ modKeyError }}</span>
</div>

<!-- @TODO/rewrite/settings Need tooltips in here -->
<table>
  <thead *ngIf="section === 'shortcuts'">
    <tr>
      <td>Action</td>
      <td>
        Shortcut
        <span title="Simply type in a letter or symbol, or one of the following: backspace, tab, enter, return, capslock, esc, escape, space, pageup, pagedown, end, home, left, up, right, down, ins, del&#10;&#10;You may include modifier keys in here too, e.g. 'shift+alt+backspace'">(?)</span>
      </td>
      <td></td>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let setting of displayedSettings">
      <td>
        <label [attr.for]="'setting-' + setting.id">
          {{ setting.name }}
          <span title="{{ setting.description }}" *ngIf="setting.description">(?)</span>
        </label>
      </td>
      <td>
        <span *ngIf="section === 'shortcuts' && settings.data['sMod'].value">{{ settings.data['sMod'].value }}+</span>
        <input
          *ngIf="setting.type === 'boolean'"
          type="checkbox"
          id="setting-{{ setting.id }}"
          [ngModel]="settings[setting.id]"
          (ngModelChange)="settingUpdated(setting, $event)"
        />
        <input
          *ngIf="setting.type === 'string'"
          type="text"
          id="setting-{{ setting.id }}"
          [(ngModel)]="settings[setting.id]"
          (blur)="settingUpdated(setting, settings[setting.id])"
          (keyup.enter)="settingUpdated(setting, settings[setting.id])"
        />
      </td>
      <td>
        <span *ngIf="dataService.isUnsaved(setting)">saving...</span>
      </td>
    </tr>
  </tbody>
</table>

<p *ngIf="section === 'shortcuts'"><i>Note: Different browsers and operating systems handle web site shortcuts differently. You might find that some combinations don't work. (For example, <code>ctrl+n</code> will be overridden by "new window" in Chrome on Windows.)</i></p>

<button (click)="revert()">Revert to defaults</button>
