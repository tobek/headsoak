extends header

block content

  //- we can call focus on this in order to blur all
  input.mousetrap#blur-hack

  div#bg-image

  div#modalclickoff(ng-click="m.cancelModal()", ng-show="m.modal")
  div.modal.modaloff(ng-class="{modalon: m.modal, modaloff: !m.modal, 'large-circle': m.modalLarge, 'huge-box': m.modalHuge }", ng-click="m.cancelModal()")
    h1#title(ng-show="!u.loggedIn") nutmeg
    div.circle-holder
      a#close-modal(ng-click="m.cancelModal()", ng-show="u.loggedIn && !m.lockedOut") x
      div.circle(ng-click="$event.stopPropagation()")

        div.about(ng-show="m.modal == 'about'")
          h3 about
          p The <a href="https://s3.amazonaws.com/nutmeg-app/builds/osx64/nutmeg.app.zip" class="download-link"><b>nutmeg</b></a> tree is any of several species of trees in genus <b>Myristica</b>. The nutmeg tree is important for two spices derived from the fruit: nutmeg and mace.

        div.shortcuts(ng-show="m.modal == 'shortcuts'")
          //- DONE
        div.settings(ng-show="m.modal == 'settings'")
          //- DONE

        div.account(ng-show="m.modal == 'account'")
          h4 {{ u.displayNameSet ? 'change display name' : 'set display name' }}
            span.tooltip-holder
              span.tooltip(data-tooltip="Your display name is visible to others if you share any notes. It does not have to be unique and may contain any character.")
                i.fa.fa-info-circle
          form(ng-submit="u.changeDisplayName(u.user.displayName)")
            input(type="text", ng-model="u.user.displayName", placeholder="{{::u.displayNamePlaceholder}}")
            br
            input(type="submit", value="{{ u.displayNameSet ? 'change name' : 'set name' }}")

          h4 change password
            //- DONE
          h4 change email
            //- DONE

        div.feedback(ng-show="m.modal == 'feedback'")
          //- DONE
        div.login(ng-show="m.modal == 'login'")
          //- DONE
        div.create-account(ng-show="m.modal == 'createaccount'")
          //- DONE
        div.dynamic(ng-show="m.modal == 'dynamic'")
          //- DONE

        div.working-overlay(ng-class="{working: m.working}")
          div.inner
            img.logo(src="/img/nutmeg100h-white.png", alt="nutmeg")

  div#full-page-loading.modal.modalon(ng-show="u.loggedIn && u.loading && ! u.loggingIn")
    div.circle-holder
        div.circle
          div.inner
            img.logo(src="/img/nutmeg100h-white.png", alt="nutmeg")


  div#nonmodal(ng-class="{modalon: m.modal, loggedout: !u.loggedIn}", ng-show="u.loggedIn && ! u.loading", ng-cloak)

    span#sync-status.tooltip(ng-class="digest.status", ng-attr-data-tooltip="Notes {{digest.status}}")
      i.cloud.fa.fa-cloud-upload

    div#menu
      ul
        li(ng-click="m.modal='about'") about 
          i.fa.fa-fw.fa-info-circle
        li(ng-click="m.modal='feedback'") feedback 
          i.fa.fa-fw.fa-comment-o
        li.incomplete export 
          i.fa.fa-fw.fa-share-square-o
        li.incomplete importer 
          i.fa.fa-fw.fa-download
        li(ng-click="m.modal='sharing'; m.modalLarge=true") sharing 
          i.fa.fa-fw.fa-users
        li.private-mode.tooltip.on-left(ng-click="p.togglePrivateMode()", ng-class="p.privateMode ? 'on' : ''", ng-attr-data-tooltip="private notes currently {{ p.privateMode ? 'visible' : 'hidden' }}, click to {{ p.privateMode ? 'hide' : 'show' }}") private mode 
          i.fa.fa-fw.fa-unlock-alt
          i.fa.fa-fw.fa-lock
        li(ng-click="m.modal='layout'; c.backup('layout')") layout 
          i.fa.fa-fw.fa-list.fa-flip-horizontal
        li(ng-click="m.modal='shortcuts'; m.modalLarge=true") shortcuts 
          i.fa.fa-fw.fa-keyboard-o
        li(ng-click="m.modal='settings'; m.modalLarge=true; c.backup('settings')") settings 
          i.fa.fa-fw.fa-gears
        li(ng-show="u.loggedIn", ng-click="m.modal='account'; m.modalLarge=true") account
          i.fa.fa-fw.fa-user
        li(ng-show="u.loggedIn", ng-click="u.auth.logout()") log out 
          i.fa.fa-fw.fa-power-off
        li(ng-show="!u.loggedIn", ng-click="m.modal='login'") log in 
          i.fa.fa-fw.fa-sign-in
      img#menuimage(src="/img/nutmeg40h.png", alt="nutmeg")

    div#query
      //- DONE

    div#main(ng-class="{'hide-tag-browser': !c.config.showTagBrowser}")
      div#nuts
          //- DONE
      div#tagContainer
          //- DONE
